if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/np-audioplayer/np-audioplayer.js']) {
   __coverage__['build/np-audioplayer/np-audioplayer.js'] = {"path":"build/np-audioplayer/np-audioplayer.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":26},"end":{"line":1,"column":45}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":11},"end":{"line":21,"column":29}}},"3":{"name":"formatTime","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":27}}},"4":{"name":"(anonymous_4)","line":153,"loc":{"start":{"line":153,"column":14},"end":{"line":153,"column":26}}},"5":{"name":"(anonymous_5)","line":157,"loc":{"start":{"line":157,"column":21},"end":{"line":157,"column":33}}},"6":{"name":"(anonymous_6)","line":167,"loc":{"start":{"line":167,"column":24},"end":{"line":167,"column":37}}},"7":{"name":"(anonymous_7)","line":179,"loc":{"start":{"line":179,"column":23},"end":{"line":179,"column":36}}},"8":{"name":"(anonymous_8)","line":184,"loc":{"start":{"line":184,"column":15},"end":{"line":184,"column":28}}},"9":{"name":"(anonymous_9)","line":198,"loc":{"start":{"line":198,"column":13},"end":{"line":198,"column":25}}},"10":{"name":"(anonymous_10)","line":202,"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":32}}},"11":{"name":"(anonymous_11)","line":213,"loc":{"start":{"line":213,"column":20},"end":{"line":213,"column":32}}},"12":{"name":"(anonymous_12)","line":219,"loc":{"start":{"line":219,"column":18},"end":{"line":219,"column":31}}},"13":{"name":"(anonymous_13)","line":239,"loc":{"start":{"line":239,"column":45},"end":{"line":239,"column":60}}},"14":{"name":"(anonymous_14)","line":258,"loc":{"start":{"line":258,"column":16},"end":{"line":258,"column":28}}},"15":{"name":"(anonymous_15)","line":289,"loc":{"start":{"line":289,"column":16},"end":{"line":289,"column":28}}},"16":{"name":"(anonymous_16)","line":318,"loc":{"start":{"line":318,"column":9},"end":{"line":318,"column":27}}},"17":{"name":"(anonymous_17)","line":332,"loc":{"start":{"line":332,"column":28},"end":{"line":332,"column":40}}},"18":{"name":"(anonymous_18)","line":344,"loc":{"start":{"line":344,"column":15},"end":{"line":344,"column":27}}},"19":{"name":"(anonymous_19)","line":353,"loc":{"start":{"line":353,"column":20},"end":{"line":353,"column":32}}},"20":{"name":"(anonymous_20)","line":365,"loc":{"start":{"line":365,"column":25},"end":{"line":365,"column":37}}},"21":{"name":"(anonymous_21)","line":375,"loc":{"start":{"line":375,"column":32},"end":{"line":375,"column":55}}},"22":{"name":"(anonymous_22)","line":394,"loc":{"start":{"line":394,"column":12},"end":{"line":394,"column":24}}},"23":{"name":"(anonymous_23)","line":402,"loc":{"start":{"line":402,"column":18},"end":{"line":402,"column":30}}},"24":{"name":"(anonymous_24)","line":408,"loc":{"start":{"line":408,"column":41},"end":{"line":408,"column":54}}},"25":{"name":"(anonymous_25)","line":434,"loc":{"start":{"line":434,"column":45},"end":{"line":434,"column":58}}},"26":{"name":"(anonymous_26)","line":463,"loc":{"start":{"line":463,"column":14},"end":{"line":463,"column":29}}},"27":{"name":"(anonymous_27)","line":477,"loc":{"start":{"line":477,"column":15},"end":{"line":477,"column":28}}},"28":{"name":"(anonymous_28)","line":496,"loc":{"start":{"line":496,"column":19},"end":{"line":496,"column":32}}},"29":{"name":"(anonymous_29)","line":514,"loc":{"start":{"line":514,"column":16},"end":{"line":514,"column":28}}},"30":{"name":"(anonymous_30)","line":528,"loc":{"start":{"line":528,"column":41},"end":{"line":528,"column":53}}},"31":{"name":"(anonymous_31)","line":533,"loc":{"start":{"line":533,"column":12},"end":{"line":533,"column":24}}},"32":{"name":"(anonymous_32)","line":550,"loc":{"start":{"line":550,"column":9},"end":{"line":550,"column":21}}},"33":{"name":"(anonymous_33)","line":604,"loc":{"start":{"line":604,"column":14},"end":{"line":604,"column":26}}},"34":{"name":"(anonymous_34)","line":608,"loc":{"start":{"line":608,"column":45},"end":{"line":608,"column":57}}},"35":{"name":"(anonymous_35)","line":615,"loc":{"start":{"line":615,"column":15},"end":{"line":615,"column":28}}},"36":{"name":"(anonymous_36)","line":619,"loc":{"start":{"line":619,"column":18},"end":{"line":619,"column":31}}},"37":{"name":"(anonymous_37)","line":623,"loc":{"start":{"line":623,"column":14},"end":{"line":623,"column":27}}},"38":{"name":"(anonymous_38)","line":640,"loc":{"start":{"line":640,"column":13},"end":{"line":640,"column":26}}},"39":{"name":"(anonymous_39)","line":646,"loc":{"start":{"line":646,"column":47},"end":{"line":646,"column":67}}},"40":{"name":"(anonymous_40)","line":654,"loc":{"start":{"line":654,"column":19},"end":{"line":654,"column":31}}},"41":{"name":"(anonymous_41)","line":658,"loc":{"start":{"line":658,"column":18},"end":{"line":658,"column":30}}},"42":{"name":"(anonymous_42)","line":669,"loc":{"start":{"line":669,"column":18},"end":{"line":669,"column":30}}},"43":{"name":"(anonymous_43)","line":678,"loc":{"start":{"line":678,"column":50},"end":{"line":678,"column":73}}},"44":{"name":"(anonymous_44)","line":696,"loc":{"start":{"line":696,"column":9},"end":{"line":696,"column":21}}},"45":{"name":"(anonymous_45)","line":710,"loc":{"start":{"line":710,"column":14},"end":{"line":710,"column":26}}},"46":{"name":"(anonymous_46)","line":713,"loc":{"start":{"line":713,"column":28},"end":{"line":713,"column":40}}},"47":{"name":"(anonymous_47)","line":719,"loc":{"start":{"line":719,"column":18},"end":{"line":719,"column":30}}},"48":{"name":"(anonymous_48)","line":728,"loc":{"start":{"line":728,"column":27},"end":{"line":728,"column":39}}},"49":{"name":"(anonymous_49)","line":750,"loc":{"start":{"line":750,"column":9},"end":{"line":750,"column":21}}},"50":{"name":"(anonymous_50)","line":758,"loc":{"start":{"line":758,"column":46},"end":{"line":758,"column":66}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":777,"column":95}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":15}},"3":{"start":{"line":5,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":17,"column":0},"end":{"line":34,"column":3}},"5":{"start":{"line":22,"column":2},"end":{"line":24,"column":5}},"6":{"start":{"line":36,"column":0},"end":{"line":60,"column":1}},"7":{"start":{"line":37,"column":1},"end":{"line":37,"column":21}},"8":{"start":{"line":39,"column":1},"end":{"line":57,"column":2}},"9":{"start":{"line":40,"column":2},"end":{"line":40,"column":29}},"10":{"start":{"line":41,"column":2},"end":{"line":45,"column":3}},"11":{"start":{"line":42,"column":3},"end":{"line":42,"column":13}},"12":{"start":{"line":44,"column":3},"end":{"line":44,"column":19}},"13":{"start":{"line":46,"column":2},"end":{"line":46,"column":14}},"14":{"start":{"line":47,"column":2},"end":{"line":47,"column":17}},"15":{"start":{"line":48,"column":2},"end":{"line":52,"column":3}},"16":{"start":{"line":49,"column":3},"end":{"line":49,"column":13}},"17":{"start":{"line":51,"column":3},"end":{"line":51,"column":19}},"18":{"start":{"line":53,"column":8},"end":{"line":57,"column":2}},"19":{"start":{"line":54,"column":2},"end":{"line":54,"column":24}},"20":{"start":{"line":56,"column":2},"end":{"line":56,"column":25}},"21":{"start":{"line":59,"column":1},"end":{"line":59,"column":13}},"22":{"start":{"line":60,"column":1},"end":{"line":571,"column":3}},"23":{"start":{"line":154,"column":2},"end":{"line":155,"column":15}},"24":{"start":{"line":157,"column":2},"end":{"line":159,"column":4}},"25":{"start":{"line":158,"column":3},"end":{"line":158,"column":29}},"26":{"start":{"line":161,"column":2},"end":{"line":164,"column":4}},"27":{"start":{"line":168,"column":2},"end":{"line":170,"column":94}},"28":{"start":{"line":172,"column":2},"end":{"line":177,"column":5}},"29":{"start":{"line":179,"column":2},"end":{"line":181,"column":4}},"30":{"start":{"line":180,"column":3},"end":{"line":180,"column":24}},"31":{"start":{"line":185,"column":2},"end":{"line":188,"column":54}},"32":{"start":{"line":190,"column":2},"end":{"line":192,"column":3}},"33":{"start":{"line":191,"column":3},"end":{"line":191,"column":16}},"34":{"start":{"line":193,"column":2},"end":{"line":193,"column":52}},"35":{"start":{"line":194,"column":2},"end":{"line":194,"column":54}},"36":{"start":{"line":195,"column":2},"end":{"line":195,"column":95}},"37":{"start":{"line":199,"column":2},"end":{"line":199,"column":33}},"38":{"start":{"line":203,"column":2},"end":{"line":205,"column":57}},"39":{"start":{"line":207,"column":2},"end":{"line":209,"column":3}},"40":{"start":{"line":208,"column":3},"end":{"line":208,"column":62}},"41":{"start":{"line":210,"column":2},"end":{"line":210,"column":50}},"42":{"start":{"line":214,"column":2},"end":{"line":214,"column":61}},"43":{"start":{"line":216,"column":2},"end":{"line":216,"column":45}},"44":{"start":{"line":220,"column":2},"end":{"line":223,"column":26}},"45":{"start":{"line":225,"column":2},"end":{"line":253,"column":3}},"46":{"start":{"line":226,"column":3},"end":{"line":226,"column":24}},"47":{"start":{"line":227,"column":3},"end":{"line":227,"column":24}},"48":{"start":{"line":229,"column":3},"end":{"line":252,"column":4}},"49":{"start":{"line":230,"column":4},"end":{"line":230,"column":24}},"50":{"start":{"line":231,"column":4},"end":{"line":231,"column":24}},"51":{"start":{"line":234,"column":4},"end":{"line":251,"column":5}},"52":{"start":{"line":236,"column":5},"end":{"line":237,"column":60}},"53":{"start":{"line":239,"column":5},"end":{"line":245,"column":8}},"54":{"start":{"line":240,"column":6},"end":{"line":244,"column":7}},"55":{"start":{"line":241,"column":7},"end":{"line":241,"column":78}},"56":{"start":{"line":242,"column":7},"end":{"line":242,"column":65}},"57":{"start":{"line":243,"column":7},"end":{"line":243,"column":85}},"58":{"start":{"line":248,"column":5},"end":{"line":248,"column":68}},"59":{"start":{"line":249,"column":5},"end":{"line":249,"column":48}},"60":{"start":{"line":250,"column":5},"end":{"line":250,"column":96}},"61":{"start":{"line":255,"column":2},"end":{"line":255,"column":63}},"62":{"start":{"line":259,"column":2},"end":{"line":261,"column":3}},"63":{"start":{"line":260,"column":3},"end":{"line":260,"column":16}},"64":{"start":{"line":263,"column":2},"end":{"line":263,"column":125}},"65":{"start":{"line":265,"column":2},"end":{"line":270,"column":20}},"66":{"start":{"line":273,"column":2},"end":{"line":273,"column":109}},"67":{"start":{"line":276,"column":2},"end":{"line":276,"column":72}},"68":{"start":{"line":277,"column":2},"end":{"line":282,"column":3}},"69":{"start":{"line":278,"column":3},"end":{"line":281,"column":4}},"70":{"start":{"line":279,"column":4},"end":{"line":279,"column":25}},"71":{"start":{"line":280,"column":4},"end":{"line":280,"column":10}},"72":{"start":{"line":285,"column":2},"end":{"line":285,"column":67}},"73":{"start":{"line":286,"column":2},"end":{"line":286,"column":128}},"74":{"start":{"line":290,"column":2},"end":{"line":292,"column":3}},"75":{"start":{"line":291,"column":3},"end":{"line":291,"column":16}},"76":{"start":{"line":294,"column":2},"end":{"line":294,"column":125}},"77":{"start":{"line":296,"column":2},"end":{"line":301,"column":20}},"78":{"start":{"line":304,"column":2},"end":{"line":304,"column":86}},"79":{"start":{"line":307,"column":2},"end":{"line":307,"column":72}},"80":{"start":{"line":308,"column":2},"end":{"line":313,"column":3}},"81":{"start":{"line":309,"column":3},"end":{"line":312,"column":4}},"82":{"start":{"line":310,"column":4},"end":{"line":310,"column":25}},"83":{"start":{"line":311,"column":4},"end":{"line":311,"column":10}},"84":{"start":{"line":315,"column":2},"end":{"line":315,"column":128}},"85":{"start":{"line":319,"column":2},"end":{"line":326,"column":15}},"86":{"start":{"line":328,"column":2},"end":{"line":341,"column":3}},"87":{"start":{"line":329,"column":3},"end":{"line":331,"column":4}},"88":{"start":{"line":330,"column":4},"end":{"line":330,"column":30}},"89":{"start":{"line":332,"column":3},"end":{"line":338,"column":12}},"90":{"start":{"line":333,"column":4},"end":{"line":334,"column":32}},"91":{"start":{"line":336,"column":4},"end":{"line":336,"column":65}},"92":{"start":{"line":337,"column":4},"end":{"line":337,"column":103}},"93":{"start":{"line":339,"column":9},"end":{"line":341,"column":3}},"94":{"start":{"line":340,"column":3},"end":{"line":340,"column":29}},"95":{"start":{"line":345,"column":2},"end":{"line":346,"column":45}},"96":{"start":{"line":348,"column":2},"end":{"line":348,"column":73}},"97":{"start":{"line":349,"column":2},"end":{"line":349,"column":101}},"98":{"start":{"line":350,"column":2},"end":{"line":350,"column":101}},"99":{"start":{"line":354,"column":2},"end":{"line":354,"column":62}},"100":{"start":{"line":356,"column":2},"end":{"line":356,"column":41}},"101":{"start":{"line":356,"column":28},"end":{"line":356,"column":40}},"102":{"start":{"line":358,"column":2},"end":{"line":359,"column":84}},"103":{"start":{"line":361,"column":2},"end":{"line":361,"column":43}},"104":{"start":{"line":366,"column":2},"end":{"line":370,"column":41}},"105":{"start":{"line":373,"column":2},"end":{"line":373,"column":41}},"106":{"start":{"line":375,"column":2},"end":{"line":381,"column":5}},"107":{"start":{"line":376,"column":3},"end":{"line":380,"column":4}},"108":{"start":{"line":377,"column":4},"end":{"line":377,"column":46}},"109":{"start":{"line":379,"column":4},"end":{"line":379,"column":39}},"110":{"start":{"line":384,"column":2},"end":{"line":389,"column":3}},"111":{"start":{"line":385,"column":3},"end":{"line":385,"column":30}},"112":{"start":{"line":387,"column":3},"end":{"line":387,"column":27}},"113":{"start":{"line":388,"column":3},"end":{"line":388,"column":25}},"114":{"start":{"line":391,"column":2},"end":{"line":391,"column":37}},"115":{"start":{"line":395,"column":2},"end":{"line":397,"column":51}},"116":{"start":{"line":399,"column":2},"end":{"line":399,"column":63}},"117":{"start":{"line":403,"column":2},"end":{"line":406,"column":15}},"118":{"start":{"line":408,"column":2},"end":{"line":432,"column":12}},"119":{"start":{"line":410,"column":3},"end":{"line":431,"column":4}},"120":{"start":{"line":411,"column":4},"end":{"line":414,"column":22}},"121":{"start":{"line":417,"column":4},"end":{"line":417,"column":88}},"122":{"start":{"line":420,"column":4},"end":{"line":420,"column":74}},"123":{"start":{"line":421,"column":4},"end":{"line":426,"column":5}},"124":{"start":{"line":422,"column":5},"end":{"line":425,"column":6}},"125":{"start":{"line":423,"column":6},"end":{"line":423,"column":27}},"126":{"start":{"line":424,"column":6},"end":{"line":424,"column":12}},"127":{"start":{"line":428,"column":4},"end":{"line":428,"column":130}},"128":{"start":{"line":430,"column":4},"end":{"line":430,"column":29}},"129":{"start":{"line":434,"column":2},"end":{"line":460,"column":5}},"130":{"start":{"line":435,"column":3},"end":{"line":439,"column":11}},"131":{"start":{"line":442,"column":3},"end":{"line":442,"column":61}},"132":{"start":{"line":443,"column":3},"end":{"line":443,"column":28}},"133":{"start":{"line":444,"column":3},"end":{"line":444,"column":23}},"134":{"start":{"line":445,"column":3},"end":{"line":445,"column":44}},"135":{"start":{"line":448,"column":3},"end":{"line":451,"column":4}},"136":{"start":{"line":450,"column":4},"end":{"line":450,"column":34}},"137":{"start":{"line":453,"column":3},"end":{"line":454,"column":3}},"138":{"start":{"line":454,"column":3},"end":{"line":454,"column":28}},"139":{"start":{"line":455,"column":3},"end":{"line":455,"column":23}},"140":{"start":{"line":457,"column":3},"end":{"line":459,"column":4}},"141":{"start":{"line":458,"column":4},"end":{"line":458,"column":47}},"142":{"start":{"line":464,"column":2},"end":{"line":464,"column":35}},"143":{"start":{"line":464,"column":23},"end":{"line":464,"column":34}},"144":{"start":{"line":466,"column":2},"end":{"line":466,"column":18}},"145":{"start":{"line":468,"column":2},"end":{"line":473,"column":3}},"146":{"start":{"line":469,"column":3},"end":{"line":470,"column":40}},"147":{"start":{"line":472,"column":3},"end":{"line":472,"column":24}},"148":{"start":{"line":474,"column":2},"end":{"line":474,"column":16}},"149":{"start":{"line":478,"column":2},"end":{"line":478,"column":29}},"150":{"start":{"line":480,"column":2},"end":{"line":491,"column":3}},"151":{"start":{"line":481,"column":3},"end":{"line":481,"column":34}},"152":{"start":{"line":484,"column":3},"end":{"line":486,"column":4}},"153":{"start":{"line":485,"column":4},"end":{"line":485,"column":34}},"154":{"start":{"line":488,"column":3},"end":{"line":488,"column":33}},"155":{"start":{"line":489,"column":3},"end":{"line":489,"column":35}},"156":{"start":{"line":490,"column":3},"end":{"line":490,"column":147}},"157":{"start":{"line":493,"column":2},"end":{"line":493,"column":71}},"158":{"start":{"line":497,"column":2},"end":{"line":497,"column":29}},"159":{"start":{"line":499,"column":2},"end":{"line":505,"column":3}},"160":{"start":{"line":500,"column":3},"end":{"line":500,"column":35}},"161":{"start":{"line":502,"column":3},"end":{"line":502,"column":34}},"162":{"start":{"line":503,"column":3},"end":{"line":503,"column":34}},"163":{"start":{"line":504,"column":3},"end":{"line":504,"column":139}},"164":{"start":{"line":507,"column":2},"end":{"line":507,"column":75}},"165":{"start":{"line":509,"column":2},"end":{"line":511,"column":3}},"166":{"start":{"line":510,"column":3},"end":{"line":510,"column":33}},"167":{"start":{"line":515,"column":2},"end":{"line":516,"column":30}},"168":{"start":{"line":518,"column":2},"end":{"line":522,"column":3}},"169":{"start":{"line":519,"column":3},"end":{"line":519,"column":39}},"170":{"start":{"line":521,"column":3},"end":{"line":521,"column":128}},"171":{"start":{"line":524,"column":2},"end":{"line":524,"column":92}},"172":{"start":{"line":526,"column":2},"end":{"line":526,"column":85}},"173":{"start":{"line":528,"column":2},"end":{"line":530,"column":5}},"174":{"start":{"line":529,"column":3},"end":{"line":529,"column":23}},"175":{"start":{"line":534,"column":2},"end":{"line":537,"column":13}},"176":{"start":{"line":539,"column":2},"end":{"line":543,"column":3}},"177":{"start":{"line":540,"column":3},"end":{"line":540,"column":30}},"178":{"start":{"line":542,"column":3},"end":{"line":542,"column":62}},"179":{"start":{"line":545,"column":2},"end":{"line":545,"column":89}},"180":{"start":{"line":547,"column":2},"end":{"line":547,"column":81}},"181":{"start":{"line":551,"column":2},"end":{"line":554,"column":13}},"182":{"start":{"line":556,"column":2},"end":{"line":556,"column":30}},"183":{"start":{"line":558,"column":2},"end":{"line":558,"column":36}},"184":{"start":{"line":559,"column":2},"end":{"line":559,"column":63}},"185":{"start":{"line":560,"column":2},"end":{"line":560,"column":23}},"186":{"start":{"line":561,"column":2},"end":{"line":561,"column":25}},"187":{"start":{"line":562,"column":2},"end":{"line":562,"column":20}},"188":{"start":{"line":563,"column":2},"end":{"line":563,"column":14}},"189":{"start":{"line":573,"column":0},"end":{"line":705,"column":3}},"190":{"start":{"line":605,"column":2},"end":{"line":606,"column":15}},"191":{"start":{"line":608,"column":2},"end":{"line":612,"column":5}},"192":{"start":{"line":609,"column":3},"end":{"line":611,"column":4}},"193":{"start":{"line":610,"column":4},"end":{"line":610,"column":27}},"194":{"start":{"line":616,"column":2},"end":{"line":616,"column":59}},"195":{"start":{"line":620,"column":2},"end":{"line":620,"column":62}},"196":{"start":{"line":624,"column":2},"end":{"line":626,"column":37}},"197":{"start":{"line":628,"column":2},"end":{"line":628,"column":78}},"198":{"start":{"line":629,"column":2},"end":{"line":629,"column":105}},"199":{"start":{"line":631,"column":2},"end":{"line":637,"column":3}},"200":{"start":{"line":632,"column":3},"end":{"line":632,"column":60}},"201":{"start":{"line":633,"column":3},"end":{"line":633,"column":55}},"202":{"start":{"line":635,"column":3},"end":{"line":635,"column":49}},"203":{"start":{"line":636,"column":3},"end":{"line":636,"column":26}},"204":{"start":{"line":641,"column":2},"end":{"line":644,"column":15}},"205":{"start":{"line":646,"column":2},"end":{"line":651,"column":5}},"206":{"start":{"line":647,"column":3},"end":{"line":650,"column":4}},"207":{"start":{"line":648,"column":4},"end":{"line":648,"column":75}},"208":{"start":{"line":649,"column":4},"end":{"line":649,"column":27}},"209":{"start":{"line":655,"column":2},"end":{"line":655,"column":25}},"210":{"start":{"line":659,"column":2},"end":{"line":661,"column":13}},"211":{"start":{"line":663,"column":2},"end":{"line":663,"column":38}},"212":{"start":{"line":665,"column":2},"end":{"line":665,"column":37}},"213":{"start":{"line":666,"column":2},"end":{"line":666,"column":32}},"214":{"start":{"line":670,"column":2},"end":{"line":676,"column":13}},"215":{"start":{"line":678,"column":2},"end":{"line":690,"column":5}},"216":{"start":{"line":679,"column":3},"end":{"line":679,"column":47}},"217":{"start":{"line":680,"column":3},"end":{"line":680,"column":24}},"218":{"start":{"line":681,"column":3},"end":{"line":681,"column":31}},"219":{"start":{"line":682,"column":3},"end":{"line":682,"column":45}},"220":{"start":{"line":683,"column":3},"end":{"line":688,"column":4}},"221":{"start":{"line":684,"column":4},"end":{"line":684,"column":42}},"222":{"start":{"line":685,"column":4},"end":{"line":687,"column":5}},"223":{"start":{"line":686,"column":5},"end":{"line":686,"column":26}},"224":{"start":{"line":689,"column":3},"end":{"line":689,"column":15}},"225":{"start":{"line":692,"column":2},"end":{"line":692,"column":37}},"226":{"start":{"line":693,"column":2},"end":{"line":693,"column":32}},"227":{"start":{"line":697,"column":2},"end":{"line":697,"column":25}},"228":{"start":{"line":698,"column":2},"end":{"line":698,"column":14}},"229":{"start":{"line":707,"column":0},"end":{"line":775,"column":3}},"230":{"start":{"line":711,"column":2},"end":{"line":711,"column":18}},"231":{"start":{"line":713,"column":2},"end":{"line":715,"column":5}},"232":{"start":{"line":714,"column":3},"end":{"line":714,"column":17}},"233":{"start":{"line":716,"column":2},"end":{"line":716,"column":63}},"234":{"start":{"line":720,"column":2},"end":{"line":722,"column":26}},"235":{"start":{"line":724,"column":2},"end":{"line":726,"column":3}},"236":{"start":{"line":725,"column":3},"end":{"line":725,"column":29}},"237":{"start":{"line":728,"column":2},"end":{"line":747,"column":11}},"238":{"start":{"line":729,"column":3},"end":{"line":729,"column":51}},"239":{"start":{"line":731,"column":3},"end":{"line":731,"column":62}},"240":{"start":{"line":733,"column":3},"end":{"line":746,"column":4}},"241":{"start":{"line":734,"column":4},"end":{"line":745,"column":5}},"242":{"start":{"line":735,"column":5},"end":{"line":743,"column":6}},"243":{"start":{"line":736,"column":6},"end":{"line":736,"column":70}},"244":{"start":{"line":738,"column":6},"end":{"line":738,"column":74}},"245":{"start":{"line":739,"column":6},"end":{"line":741,"column":7}},"246":{"start":{"line":740,"column":7},"end":{"line":740,"column":72}},"247":{"start":{"line":744,"column":5},"end":{"line":744,"column":11}},"248":{"start":{"line":751,"column":2},"end":{"line":753,"column":13}},"249":{"start":{"line":755,"column":2},"end":{"line":764,"column":3}},"250":{"start":{"line":756,"column":3},"end":{"line":756,"column":68}},"251":{"start":{"line":758,"column":3},"end":{"line":763,"column":6}},"252":{"start":{"line":759,"column":4},"end":{"line":760,"column":42}},"253":{"start":{"line":762,"column":4},"end":{"line":762,"column":95}},"254":{"start":{"line":766,"column":2},"end":{"line":766,"column":30}},"255":{"start":{"line":767,"column":2},"end":{"line":767,"column":53}},"256":{"start":{"line":768,"column":2},"end":{"line":768,"column":25}},"257":{"start":{"line":769,"column":2},"end":{"line":769,"column":14}}},"branchMap":{"1":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},{"start":{"line":39,"column":1},"end":{"line":39,"column":1}}]},"2":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":2}},{"start":{"line":41,"column":2},"end":{"line":41,"column":2}}]},"3":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":2}},{"start":{"line":48,"column":2},"end":{"line":48,"column":2}}]},"4":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":53,"column":8}},{"start":{"line":53,"column":8},"end":{"line":53,"column":8}}]},"5":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":2},"end":{"line":190,"column":2}},{"start":{"line":190,"column":2},"end":{"line":190,"column":2}}]},"6":{"line":190,"type":"binary-expr","locations":[{"start":{"line":190,"column":5},"end":{"line":190,"column":41}},{"start":{"line":190,"column":45},"end":{"line":190,"column":81}}]},"7":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":2},"end":{"line":207,"column":2}},{"start":{"line":207,"column":2},"end":{"line":207,"column":2}}]},"8":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":2},"end":{"line":225,"column":2}},{"start":{"line":225,"column":2},"end":{"line":225,"column":2}}]},"9":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":3},"end":{"line":229,"column":3}},{"start":{"line":229,"column":3},"end":{"line":229,"column":3}}]},"10":{"line":234,"type":"if","locations":[{"start":{"line":234,"column":4},"end":{"line":234,"column":4}},{"start":{"line":234,"column":4},"end":{"line":234,"column":4}}]},"11":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":6},"end":{"line":240,"column":6}},{"start":{"line":240,"column":6},"end":{"line":240,"column":6}}]},"12":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":2},"end":{"line":259,"column":2}},{"start":{"line":259,"column":2},"end":{"line":259,"column":2}}]},"13":{"line":278,"type":"if","locations":[{"start":{"line":278,"column":3},"end":{"line":278,"column":3}},{"start":{"line":278,"column":3},"end":{"line":278,"column":3}}]},"14":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":2},"end":{"line":290,"column":2}},{"start":{"line":290,"column":2},"end":{"line":290,"column":2}}]},"15":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":3},"end":{"line":309,"column":3}},{"start":{"line":309,"column":3},"end":{"line":309,"column":3}}]},"16":{"line":328,"type":"if","locations":[{"start":{"line":328,"column":2},"end":{"line":328,"column":2}},{"start":{"line":328,"column":2},"end":{"line":328,"column":2}}]},"17":{"line":329,"type":"if","locations":[{"start":{"line":329,"column":3},"end":{"line":329,"column":3}},{"start":{"line":329,"column":3},"end":{"line":329,"column":3}}]},"18":{"line":339,"type":"if","locations":[{"start":{"line":339,"column":9},"end":{"line":339,"column":9}},{"start":{"line":339,"column":9},"end":{"line":339,"column":9}}]},"19":{"line":356,"type":"if","locations":[{"start":{"line":356,"column":2},"end":{"line":356,"column":2}},{"start":{"line":356,"column":2},"end":{"line":356,"column":2}}]},"20":{"line":376,"type":"if","locations":[{"start":{"line":376,"column":3},"end":{"line":376,"column":3}},{"start":{"line":376,"column":3},"end":{"line":376,"column":3}}]},"21":{"line":384,"type":"if","locations":[{"start":{"line":384,"column":2},"end":{"line":384,"column":2}},{"start":{"line":384,"column":2},"end":{"line":384,"column":2}}]},"22":{"line":410,"type":"if","locations":[{"start":{"line":410,"column":3},"end":{"line":410,"column":3}},{"start":{"line":410,"column":3},"end":{"line":410,"column":3}}]},"23":{"line":422,"type":"if","locations":[{"start":{"line":422,"column":5},"end":{"line":422,"column":5}},{"start":{"line":422,"column":5},"end":{"line":422,"column":5}}]},"24":{"line":448,"type":"if","locations":[{"start":{"line":448,"column":3},"end":{"line":448,"column":3}},{"start":{"line":448,"column":3},"end":{"line":448,"column":3}}]},"25":{"line":457,"type":"if","locations":[{"start":{"line":457,"column":3},"end":{"line":457,"column":3}},{"start":{"line":457,"column":3},"end":{"line":457,"column":3}}]},"26":{"line":464,"type":"if","locations":[{"start":{"line":464,"column":2},"end":{"line":464,"column":2}},{"start":{"line":464,"column":2},"end":{"line":464,"column":2}}]},"27":{"line":480,"type":"if","locations":[{"start":{"line":480,"column":2},"end":{"line":480,"column":2}},{"start":{"line":480,"column":2},"end":{"line":480,"column":2}}]},"28":{"line":484,"type":"if","locations":[{"start":{"line":484,"column":3},"end":{"line":484,"column":3}},{"start":{"line":484,"column":3},"end":{"line":484,"column":3}}]},"29":{"line":499,"type":"if","locations":[{"start":{"line":499,"column":2},"end":{"line":499,"column":2}},{"start":{"line":499,"column":2},"end":{"line":499,"column":2}}]},"30":{"line":509,"type":"if","locations":[{"start":{"line":509,"column":2},"end":{"line":509,"column":2}},{"start":{"line":509,"column":2},"end":{"line":509,"column":2}}]},"31":{"line":518,"type":"if","locations":[{"start":{"line":518,"column":2},"end":{"line":518,"column":2}},{"start":{"line":518,"column":2},"end":{"line":518,"column":2}}]},"32":{"line":536,"type":"cond-expr","locations":[{"start":{"line":536,"column":28},"end":{"line":536,"column":48}},{"start":{"line":536,"column":51},"end":{"line":536,"column":55}}]},"33":{"line":539,"type":"if","locations":[{"start":{"line":539,"column":2},"end":{"line":539,"column":2}},{"start":{"line":539,"column":2},"end":{"line":539,"column":2}}]},"34":{"line":609,"type":"if","locations":[{"start":{"line":609,"column":3},"end":{"line":609,"column":3}},{"start":{"line":609,"column":3},"end":{"line":609,"column":3}}]},"35":{"line":631,"type":"if","locations":[{"start":{"line":631,"column":2},"end":{"line":631,"column":2}},{"start":{"line":631,"column":2},"end":{"line":631,"column":2}}]},"36":{"line":647,"type":"if","locations":[{"start":{"line":647,"column":3},"end":{"line":647,"column":3}},{"start":{"line":647,"column":3},"end":{"line":647,"column":3}}]},"37":{"line":683,"type":"if","locations":[{"start":{"line":683,"column":3},"end":{"line":683,"column":3}},{"start":{"line":683,"column":3},"end":{"line":683,"column":3}}]},"38":{"line":685,"type":"if","locations":[{"start":{"line":685,"column":4},"end":{"line":685,"column":4}},{"start":{"line":685,"column":4},"end":{"line":685,"column":4}}]},"39":{"line":685,"type":"binary-expr","locations":[{"start":{"line":685,"column":7},"end":{"line":685,"column":35}},{"start":{"line":685,"column":39},"end":{"line":685,"column":56}}]},"40":{"line":724,"type":"if","locations":[{"start":{"line":724,"column":2},"end":{"line":724,"column":2}},{"start":{"line":724,"column":2},"end":{"line":724,"column":2}}]},"41":{"line":734,"type":"if","locations":[{"start":{"line":734,"column":4},"end":{"line":734,"column":4}},{"start":{"line":734,"column":4},"end":{"line":734,"column":4}}]},"42":{"line":735,"type":"if","locations":[{"start":{"line":735,"column":5},"end":{"line":735,"column":5}},{"start":{"line":735,"column":5},"end":{"line":735,"column":5}}]},"43":{"line":739,"type":"if","locations":[{"start":{"line":739,"column":6},"end":{"line":739,"column":6}},{"start":{"line":739,"column":6},"end":{"line":739,"column":6}}]},"44":{"line":755,"type":"if","locations":[{"start":{"line":755,"column":2},"end":{"line":755,"column":2}},{"start":{"line":755,"column":2},"end":{"line":755,"column":2}}]}},"code":["(function () { YUI.add('np-audioplayer', function (Y, NAME) {","","var L = Y.Lang;\r","\r","Y.AlbumList = Y.Base.create('albumList', Y.ModelList, [Y.NPModel.Sync], {\r","\tapis: {\r","\t\tread: '/api/albums'\r","\t},\r","\tmodel: Y.Album\r","}, {\r","\tATTRS: {\r","\t\tactive_album: {value: null},\t\t\t\t//当前播放专辑\r","\t\tdefault_alubmIndex: {value: 0}\t\t\t\t//默认播放专辑索引\r","\t}\r","});\r","\r","Y.AudioList = Y.Base.create('audioList', Y.ModelList, [Y.NPModel.Sync], {\r","\tapis: {\r","\t\tread: '/api/albums/{id}'\r","\t},\r","\tbuildURL: function (action) {\r","\t\treturn L.sub(this.apis[action], {\r","\t\t\tid: this.get('album_id')\r","\t\t});\r","\t},\r","\tmodel: Y.Audio\r","}, {\r","\tATTRS: {\r","\t\talbum_id: {value: null},\r","\t\tplaying_audios: {value: []},\t\t\t//马上要播放的歌单列表\r","\t\tplaying_audioIndex: {value: 0},\t\t\t//马上要播放的歌曲在playing_audios中的索引\r","\t\tactive_audioIndex: {value: null}\t\t//当前播放歌曲在audioList中的索引\r","\t}\r","});\r","\r","function formatTime(value) {\r","\tvar x, y, html = '';\r","\r","\tif(value > 60) {\r","\t\tx = Math.floor(value / 60);\r","\t\tif(x >= 10) {\r","\t\t\thtml += x;\r","\t\t} else {\r","\t\t\thtml += '0' + x;\r","\t\t}\r","\t\thtml += ':';\r","\t\ty = value % 60;\r","\t\tif(y >= 10) {\r","\t\t\thtml += y;\r","\t\t} else {\r","\t\t\thtml += '0' + y;\r","\t\t}\r","\t} else if(value >= 10) {\r","\t\thtml += '00:' + value;\r","\t} else {\r","\t\thtml += '00:0' + value;\r","\t}\r","\r","\treturn html;\r","}Y.AudioPlayer = Y.Base.create('audioPlayer', Y.View, [], {\r","\ttemplate: Y.Handlebars.compile('<div class=\"audioplayer\">' +\r","\t\t'<div class=\"audioplayer-panel\">' +\r","\t\t\t'<div class=\"audioplayer-panel-hd\">' +\r","\t\t\t\t'<a class=\"audioplayer-panel-hd-album\">专辑</a>' +\r","\t\t\t\t'<span class=\"audioplayer-panel-hd-switch\">' +\r","\t\t\t\t\t'<span class=\"audioplayer-panel-hd-switch-roller\"></span>' +\r","\t\t\t\t'</span>' +\r","\t\t\t\t'<a class=\"audioplayer-panel-hd-lyric\">歌词</a>' +\r","\t\t\t'</div>' +\r","\t\t\t'<div class=\"audioplayer-panel-bd\"></div>' +\r","\t\t'</div>' +\r","\t\t'<div class=\"audioplayer-control\">' +\r","\t\t\t'<div class=\"audioplayer-control-main\">' +\r","\t\t\t\t'<div class=\"audioplayer-control-infos\">{{#album}}' +\r","\t\t\t\t\t'<a class=\"audioplayer-control-infos-avatar\"><img src=\"{{{avatar}}}\" width=\"80px\" height=\"80px\"/></a>' +\r","\t\t\t\t\t'<h3>xxx</h3>' +\r","\t\t\t\t\t'<p>yyy</p>' +\r","\t\t\t\t\t'<p>{{{name}}}</p>' +\r","\t\t\t\t'{{/album}}</div>' +\r","\t\t\t\t'<div class=\"audioplayer-control-boardcast\">' +\r","\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-content\">' +\r","\t\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-row1\">' +\r","\t\t\t\t\t\t\t'<a class=\"audioplayer-control-boardcast-row1-prev\"></a>' +\r","\t\t\t\t\t\t\t'<a class=\"audioplayer-control-boardcast-row1-play\"></a>' +\r","\t\t\t\t\t\t\t'<a class=\"audioplayer-control-boardcast-row1-next\"></a>' +\r","\t\t\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-row1-volume\">' +\r","\t\t\t\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-row1-volume-inner\" style=\"width:80px;\"></div>' +\r","\t\t\t\t\t\t\t\t'<span class=\"audioplayer-control-boardcast-row1-volume-roller\" style=\"left:70px;\"></span>' +\r","\t\t\t\t\t\t\t'</div>' +\r","\t\t\t\t\t\t'</div>' +\r","\t\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-row2\">' +\r","\t\t\t\t\t\t\t'<span class=\"audioplayer-control-boardcast-row2-time1\">00:00</span>' +\r","\t\t\t\t\t\t\t'<span class=\"audioplayer-control-boardcast-row2-time2\">05:21</span>' +\r","\t\t\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-row2-process\">' +\r","\t\t\t\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-row2-process-value\" style=\"\"></div>' +\r","\t\t\t\t\t\t\t'</div>' +\r","\t\t\t\t\t\t'</div>' +\r","\t\t\t\t\t\t'<div class=\"audioplayer-control-boardcast-row3\">' +\r","\t\t\t\t\t\t\t'<a class=\"audioplayer-control-boardcast-row3-repeat\">单曲重复</a>' +\r","\t\t\t\t\t\t\t'<a class=\"audioplayer-control-boardcast-row3-stochastic\">随机播放</a>' +\r","\t\t\t\t\t\t'</div>' +\r","\t\t\t\t\t'</div>' +\r","\t\t\t\t'</div>' +\r","\t\t\t'</div>' +\r","\t\t\t'<a class=\"audioplayer-control-side\">' +\r","\t\t\t\t'<span class=\"audioplayer-control-side-arrow\"></span>' +\r","\t\t\t\t/*'<span class=\"audioplayer-control-arrow\">' +\r","\t\t\t\t\t'<span class=\"audioplayer-control-arrow-outside\"></span>' +\r","\t\t\t\t\t'<span class=\"audioplayer-control-arrow-inside\"></span>' +\r","\t\t\t\t'</span>' +*/\r","\t\t\t'</a>' +\r","\t\t'</div>' +\r","\t'</div>' +\r","\t'<audio id=\"audios-engine\"><source /></audio>'),\r","\ttemplate_info: Y.Handlebars.compile('{{#album}}<a class=\"audioplayer-control-infos-avatar\"><img src=\"{{{avatar}}}\" width=\"80px\" height=\"80px\"/></a>{{/album}}' +\r","\t'{{#audio}}<h3>{{{name}}}</h3>' +\r","\t'<p>{{{author}}}</p>{{/audio}}' +\r","\t'{{#album}}<p>{{{name}}}</p>{{/album}}'),\r","\r","\tevents: {\r","\t\t'.audioplayer-control-side': {\r","\t\t\tclick: 'toggleSideExpand'\r","\t\t},\r","\t\t'.audioplayer-control-infos-avatar': {\r","\t\t\tclick: 'togglePanelExpand'\r","\t\t},\r","\t\t'.audioplayer-panel-hd-album': {\r","\t\t\tclick: 'showAlbumList'\r","\t\t},\r","\t\t'.audioplayer-panel-hd-lyric': {\r","\t\t\tclick: 'showLyric'\r","\t\t},\r","\t\t'.audioplayer-control-boardcast-row3-repeat': {\r","\t\t\tclick: 'handleRepeat'\r","\t\t},\r","\t\t'.audioplayer-control-boardcast-row3-stochastic': {\r","\t\t\tclick: 'handleStochastic'\r","\t\t},\r","\t\t'.audioplayer-control-boardcast-row1-play': {\r","\t\t\tclick: 'playAudioEngine'\r","\t\t},\r","\t\t'.audioplayer-control-boardcast-row1-prev': {\r","\t\t\tclick: 'playPrevAudio'\r","\t\t},\r","\t\t'.audioplayer-control-boardcast-row1-next': {\r","\t\t\tclick: 'playNextAudio'\r","\t\t},\r","\t\t'.audioplayer-control-boardcast-row1-volume-roller': {\r","\t\t\tmousedown: 'handleVolumeMouseDown'\r","\t\t}\r","\t},\r","\r","\tinitializer: function () {\r","\t\tvar audioList = this.get('audioList'),\r","\t\t\tself = this;\r","\r","\t\twindow.onmouseup = function () {\r","\t\t\twindow.onmousemove = null;\r","\t\t};\r","\r","\t\tthis._volumeObj = {\r","\t\t\toffsetMinLeft: -10,\r","\t\t\toffsetMaxLeft: 90\r","\t\t};\r","\t},\r","\r","\thandleVolumeMouseDown: function (e) {\r","\t\tvar self = this,\r","\t\t\trollerNode = this.get('container').one('.audioplayer-control-boardcast-row1-volume-roller'),\r","\t\t\tprocessBar = this.get('container').one('.audioplayer-control-boardcast-row1-volume-inner');\r","\r","\t\tY.mix(this._volumeObj, {\r","\t\t\tpageX: e.pageX,\r","\t\t\tleft: parseInt(rollerNode.getStyle('left')),\r","\t\t\trollerNode: rollerNode,\r","\t\t\tprocessBar: processBar\r","\t\t});\r","\r","\t\twindow.onmousemove = function (e) {\r","\t\t\tself.handleVolume(e);\r","\t\t};\r","\t},\r","\r","\thandleVolume: function (e) {\r","\t\tvar volumeObj = this._volumeObj,\r","\t\t\tx = e.pageX - volumeObj.pageX,\r","\t\t\toffsetLeft = volumeObj.left + x,\r","\t\t\toffsetWidth = offsetLeft - volumeObj.offsetMinLeft;\r","\r","\t\tif(offsetLeft < volumeObj.offsetMinLeft || offsetLeft > volumeObj.offsetMaxLeft) {\r","\t\t\treturn false;\r","\t\t}\r","\t\tvolumeObj.rollerNode.setStyle('left', offsetLeft);\r","\t\tvolumeObj.processBar.setStyle('width', offsetWidth);\r","\t\tthis.audiosEngine.volume = offsetWidth / (volumeObj.offsetMaxLeft - volumeObj.offsetMinLeft);\r","\t},\r","\r","\tinitVolume: function () {\r","\t\tthis.audiosEngine.volume = 0.8;\r","\t},\r","\r","\ttoggleSideExpand: function (e) {\r","\t\tvar cont = this.get('container'),\r","\t\t\taudioplayerNode = cont.one('.audioplayer'),\r","\t\t\taudioplayerPanelNode = cont.one('.audioplayer-panel');\r","\r","\t\tif(audioplayerNode.hasClass('audioplayer-hide')) {\r","\t\t\taudioplayerPanelNode.removeClass('audioplayer-panel-hide');\r","\t\t}\r","\t\taudioplayerNode.toggleClass('audioplayer-hide');\r","\t},\r","\r","\ttogglePanelExpand: function () {\r","\t\tvar node = this.get('container').one('.audioplayer-panel');\r","\r","\t\tnode.toggleClass('audioplayer-panel-hide');\r","\t},\r","\r","\tplayAudioEngine: function (e) {\r","\t\tvar audiosEngine = this.audiosEngine,\r","\t\t\taudioList = this.get('audioList'),\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\tnode = e.currentTarget;\r","\r","\t\tif(node.hasClass('audioplayer-control-boardcast-row1-pause')) {\r","\t\t\taudiosEngine.pause();\r","\t\t\tthis.toPlay('pause');\r","\t\t} else {\r","\t\t\tif(audiosEngine.src) {\r","\t\t\t\taudiosEngine.play();\r","\t\t\t\tthis.toPlay('play');\r","\t\t\t} else {\r","\t\t\t\t//未加载专辑歌单\r","\t\t\t\tif(audioList.get('album_id') === null) {\r","\t\t\t\t\t//加载默认专辑的歌单\r","\t\t\t\t\tvar defaultAlubmIndex = albumList.get('default_alubmIndex'),\r","\t\t\t\t\t\talbumId = albumList.item(defaultAlubmIndex).get('id');\r","\r","\t\t\t\t\taudioList.set('album_id', albumId).load(function (err) {\r","\t\t\t\t\t\tif(!err) {\r","\t\t\t\t\t\t\talbumList.getById(albumId).set('audio_collection', audioList.toJSON());\r","\t\t\t\t\t\t\talbumList.set('active_album', albumList.getById(albumId));\r","\t\t\t\t\t\t\taudioList.set('active_audioIndex', defaultAlubmIndex + '-0', {smooth: false});\r","\t\t\t\t\t\t}\r","\t\t\t\t\t});\r","\t\t\t\t} else {\r","\t\t\t\t\t//设置active_album 和 active_audioIndex\r","\t\t\t\t\tvar activeAlbum = albumList.getById(audioList.get('album_id'));\r","\t\t\t\t\talbumList.set('active_album', activeAlbum);\r","\t\t\t\t\taudioList.set('active_audioIndex', albumList.indexOf(activeAlbum) + '-0', {smooth: false});\r","\t\t\t\t}\r","\t\t\t}\r","\t\t}\r","\r","\t\tnode.toggleClass('audioplayer-control-boardcast-row1-pause');\r","\t},\r","\r","\tplayPrevAudio: function () {\r","\t\tif(this.get('audioList').get('active_audioIndex') === null) {\r","\t\t\treturn false;\r","\t\t}\r","\r","\t\tthis.get('container').one('.audioplayer-control-boardcast-row1-play').addClass('audioplayer-control-boardcast-row1-pause');\r","\r","\t\tvar audioList = this.get('audioList'),\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\tplayingAudioIndex = audioList.get('playing_audioIndex'),\r","\t\t\tplayingAudios = audioList.get('playing_audios'),\r","\t\t\taudioCollection = albumList.get('active_album').get('audio_collection'),\r","\t\t\tactiveAudioIndex;\r","\t\t\r","\t\t//更新playing_audioIndex\r","\t\taudioList.set('playing_audioIndex', (playingAudioIndex - 1 + playingAudios.length) % playingAudios.length);\r","\r","\t\t//更新active_audioIndex\r","\t\tactiveAudioId = playingAudios[audioList.get('playing_audioIndex')].id;\r","\t\tfor(var i = 0, len = audioCollection.length; i < len; i++) {\r","\t\t\tif(audioCollection[i].id === activeAudioId) {\r","\t\t\t\tactiveAudioIndex = i;\r","\t\t\t\tbreak;\r","\t\t\t}\r","\t\t}\r","\r","\t\t//更新active_audioIndex\r","\t\tactiveAudio = playingAudios[audioList.get('playing_audioIndex')];\r","\t\taudioList.set('active_audioIndex', audioList.get('active_audioIndex').split('-')[0] + '-' + activeAudioIndex, {smooth: true});\r","\t},\r","\r","\tplayNextAudio: function () {\r","\t\tif(this.get('audioList').get('active_audioIndex') === null) {\r","\t\t\treturn false;\r","\t\t}\r","\r","\t\tthis.get('container').one('.audioplayer-control-boardcast-row1-play').addClass('audioplayer-control-boardcast-row1-pause');\r","\r","\t\tvar audioList = this.get('audioList'),\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\tplayingAudioIndex = audioList.get('playing_audioIndex'),\r","\t\t\tplayingAudios = audioList.get('playing_audios'),\r","\t\t\taudioCollection = albumList.get('active_album').get('audio_collection'),\r","\t\t\tactiveAudioIndex;\r","\r","\t\t//更新playing_audioIndex\r","\t\taudioList.set('playing_audioIndex', (playingAudioIndex + 1) % playingAudios.length);\r","\r","\t\t//更新active_audioIndex\r","\t\tactiveAudioId = playingAudios[audioList.get('playing_audioIndex')].id;\r","\t\tfor(var i = 0, len = audioCollection.length; i < len; i++) {\r","\t\t\tif(audioCollection[i].id === activeAudioId) {\r","\t\t\t\tactiveAudioIndex = i;\r","\t\t\t\tbreak;\r","\t\t\t}\r","\t\t}\r","\r","\t\taudioList.set('active_audioIndex', audioList.get('active_audioIndex').split('-')[0] + '-' + activeAudioIndex, {smooth: true});\r","\t},\r","\r","\ttoPlay: function (action) {\r","\t\tvar cont = this.get('container'),\r","\t\t\t// barWidth = cont.one('.audioplayer-control-boardcast-row2-process').getAttribute('width'),\r","\t\t\tbarWidth = 230,\r","\t\t\tnode = cont.one('.audioplayer-control-boardcast-row2-process-value'),\r","\t\t\taudioList = this.get('audioList'),\r","\t\t\tactiveAudioObj = audioList.get('playing_audios')[audioList.get('playing_audioIndex')],\r","\t\t\tduration = activeAudioObj.duration,\r","\t\t\tself = this;\r","\r","\t\tif(action === 'play') {\r","\t\t\tif(this.timer) {\r","\t\t\t\tclearInterval(this.timer);\r","\t\t\t}\r","\t\t\tthis.timer = setInterval(function () {\r","\t\t\t\tvar currentTime = self.audiosEngine.currentTime,\r","\t\t\t\t\tp = currentTime / duration;\r","\r","\t\t\t\tnode.setAttribute('style', 'width: ' + p * barWidth + 'px;');\r","\t\t\t\tcont.one('.audioplayer-control-boardcast-row2-time1').setHTML(formatTime(Math.round(currentTime)));\r","\t\t\t}, 1000);\r","\t\t} else if (action === 'pause') {\r","\t\t\tclearInterval(this.timer);\r","\t\t}\r","\t},\r","\r","\tresetProcess: function () {\r","\t\tvar cont = this.get('container'),\r","\t\t\tactiveAudioObj = this.getActiveAudioObj();\r","\r","\t\tcont.one('.audioplayer-control-boardcast-row2-time1').setHTML('00:00');\r","\t\tcont.one('.audioplayer-control-boardcast-row2-time2').setHTML(formatTime(activeAudioObj.duration));\r","\t\tcont.one('.audioplayer-control-boardcast-row2-process-value').setAttribute('style', 'width: 0px;');\r","\t},\r","\r","\tgetActiveAudioObj: function () {\r","\t\tvar activeAlbum = this.get('albumList').get('active_album');\r","\r","\t\tif(activeAlbum === null) {return null;}\r","\r","\t\tvar audioCollection = activeAlbum.get('audio_collection'),\r","\t\t\tactiveAudioIndex = +this.get('audioList').get('active_audioIndex').split('-')[1];\r","\r","\t\treturn audioCollection[activeAudioIndex];\r","\t},\r","\r","\t//创建播放歌单\r","\tcreateCurrentAudioList: function () {\r","\t\tvar audioList = this.get('audioList'),\r","\t\t\tactiveAlbum = this.get('albumList').get('active_album'),\r","\t\t\taudioCollection = activeAlbum.get('audio_collection'),\r","\t\t\tactiveAudioIndex = +audioList.get('active_audioIndex').split('-')[1],\r","\t\t\tsize = audioCollection.length, c = [];\r","\r","\t\t//初始化 playing_audioIndex\r","\t\taudioList.set('playing_audioIndex', 0);\r","\r","\t\tY.Array.each(audioCollection, function (item, index) {\r","\t\t\tif(index < activeAudioIndex) {\r","\t\t\t\tc[size - activeAudioIndex + index] = item;\r","\t\t\t} else {\r","\t\t\t\tc[index - activeAudioIndex] = item;\r","\t\t\t}\r","\t\t});\r","\r","\t\t//随机播放，将顺序打乱\r","\t\tif(this.get('isStochastic')) {\r","\t\t\tvar firstAudio = c.shift();\r","\r","\t\t\tc = this.resortArray(c);\r","\t\t\tc.unshift(firstAudio);\r","\t\t}\r","\r","\t\taudioList.set('playing_audios', c);\r","\t},\r","\r","\tloadAudio: function () {\r","\t\tvar audioList = this.get('audioList'),\r","\t\t\tplayingAudioIndex = audioList.get('playing_audioIndex'),\r","\t\t\tplayingAudios = audioList.get('playing_audios');\r","\r","\t\tthis.audiosEngine.src = playingAudios[playingAudioIndex].src;\r","\t},\r","\r","\tbindAudioEngine: function () {\r","\t\tvar audiosEngine = this.audiosEngine,\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\taudioList = this.get('audioList'),\r","\t\t\tself = this;\r","\r","\t\taudiosEngine.addEventListener('ended', function (e) {\r","\t\t\t//不单曲重复的情况\r","\t\t\tif(!self.get('isRepeatOne')) {\r","\t\t\t\tvar playingAudioIndex = audioList.get('playing_audioIndex'),\r","\t\t\t\t\tplayingAudios = audioList.get('playing_audios'),\r","\t\t\t\t\taudioCollection = albumList.get('active_album').get('audio_collection'),\r","\t\t\t\t\tactiveAudioIndex;\r","\r","\t\t\t\t//更新playing_audioIndex\r","\t\t\t\taudioList.set('playing_audioIndex', (playingAudioIndex + 1) % playingAudios.length);\r","\r","\t\t\t\t//更新active_audioIndex\r","\t\t\t\tactiveAudioId = playingAudios[audioList.get('playing_audioIndex')].id;\r","\t\t\t\tfor(var i = 0, len = audioCollection.length; i < len; i++) {\r","\t\t\t\t\tif(audioCollection[i].id === activeAudioId) {\r","\t\t\t\t\t\tactiveAudioIndex = i;\r","\t\t\t\t\t\tbreak;\r","\t\t\t\t\t}\r","\t\t\t\t}\r","\r","\t\t\t\taudioList.set('active_audioIndex', audioList.get('active_audioIndex').split('-')[0] + '-' + activeAudioIndex, {smooth: true});\r","\t\t\t} else {\r","\t\t\t\tself.audiosEngine.play();\r","\t\t\t}\r","\t\t}, false);\r","\r","\t\taudioList.after('active_audioIndexChange', function (e) {\r","\t\t\tvar activeAudioIndex = +e.newVal.split('-')[1],\r","\t\t\t\t// activeAudio = audioList.item(+e.newVal.split('-')[1]),\r","\t\t\t\tinfosNode = self.get('container').one('.audioplayer-control-infos'),\r","\t\t\t\talbum = albumList.get('active_album'),\r","\t\t\t\to = {};\r","\r","\t\t\t//更新html\r","\t\t\to.audio = album.get('audio_collection')[activeAudioIndex];\r","\t\t\to.album = album.toJSON();\r","\t\t\tself.resetProcess();\r","\t\t\tinfosNode.setHTML(self.template_info(o));\r","\r","\t\t\t//不是平滑过渡到下一曲\r","\t\t\tif(!e.smooth) {\r","\t\t\t\t//更新播放列表，播放选中歌曲\r","\t\t\t\tself.createCurrentAudioList();\r","\t\t\t}\r","\r","\t\t\tself.loadAudio()\r","\t\t\tself.audiosEngine.play();\r","\t\t\tself.toPlay('play');\r","\r","\t\t\tif(self.lyricView) {\r","\t\t\t\tself.lyricView.set('lyric', o.audio.lyric);\r","\t\t\t}\r","\t\t});\r","\t},\r","\r","\tresortArray: function (arr) {\r","\t\tif(arr.length <= 1) {return arr;}\r","\r","\t\tvar newArr = [];\r","\r","\t\tfor(var i = 0, len = arr.length; i < len; i++) {\r","\t\t\tvar randNum = Math.floor(Math.random() * arr.length),\r","\t\t\t\trandEle = arr.splice(randNum, 1)[0];\r","\r","\t\t\tnewArr.push(randEle);\r","\t\t}\r","\t\treturn newArr;\r","\t},\r","\r","\thandleRepeat: function (e) {\r","\t\tvar node = e.currentTarget;\r","\r","\t\tif(node.hasClass('audioplayer-control-boardcast-row3-repeat-active')) {\r","\t\t\tthis.set('isRepeatOne', false);\r","\r","\t\t\t//取消单曲重复，此时回复顺序轮询播放\r","\t\t\tif(this.get('audioList').get('active_audioIndex') !== null) {\r","\t\t\t\tthis.createCurrentAudioList();\r","\t\t\t}\r","\t\t} else {\r","\t\t\tthis.set('isRepeatOne', true);\r","\t\t\tthis.set('isStochastic', false);\r","\t\t\tthis.get('container').one('.audioplayer-control-boardcast-row3-stochastic').removeClass('audioplayer-control-boardcast-row3-stochastic-active');\r","\t\t}\r","\r","\t\tnode.toggleClass('audioplayer-control-boardcast-row3-repeat-active');\r","\t},\r","\r","\thandleStochastic: function (e) {\r","\t\tvar node = e.currentTarget;\r","\r","\t\tif(node.hasClass('audioplayer-control-boardcast-row3-stochastic-active')) {\r","\t\t\tthis.set('isStochastic', false);\r","\t\t} else {\r","\t\t\tthis.set('isStochastic', true);\r","\t\t\tthis.set('isRepeatOne', false);\r","\t\t\tthis.get('container').one('.audioplayer-control-boardcast-row3-repeat').removeClass('audioplayer-control-boardcast-row3-repeat-active');\r","\t\t}\r","\r","\t\tnode.toggleClass('audioplayer-control-boardcast-row3-stochastic-active');\r","\t\t//重新创建歌单\r","\t\tif(this.get('audioList').get('active_audioIndex') !== null) {\r","\t\t\tthis.createCurrentAudioList();\r","\t\t}\r","\t},\r","\r","\tshowAlbumList: function () {\r","\t\tvar cont = this.get('container'),\r","\t\t\tself = this, albumListView;\r","\r","\t\tif(this.albumListView) {\r","\t\t\talbumListView = this.albumListView ;\r","\t\t} else {\r","\t\t\talbumListView = this.albumListView = new AlbumListView({albumList: this.get('albumList'), audioList: this.get('audioList')});\r","\t\t}\r","\r","\t\tcont.one('.audioplayer-panel-hd-switch').removeClass('audioplayer-panel-hd-switch-right');\r","\r","\t\tcont.one('.audioplayer-panel-bd').setHTML(albumListView.render().get('container'));\r","\r","\t\talbumListView.on('audioRestartChange', function () {\r","\t\t\tself.resetProcess();\r","\t\t});\r","\t},\r","\r","\tshowLyric: function () {\r","\t\tvar cont = this.get('container'),\r","\t\t\tactiveAudioObj = this.getActiveAudioObj(),\r","\t\t\tlyric = activeAudioObj ? activeAudioObj.lyric : null,\r","\t\t\tlyricView;\r","\r","\t\tif(this.lyricView) {\r","\t\t\tlyricView = this.lyricView;\r","\t\t} else {\r","\t\t\tlyricView = this.lyricView = new LyricView({lyric: lyric});\r","\t\t}\r","\r","\t\tcont.one('.audioplayer-panel-hd-switch').addClass('audioplayer-panel-hd-switch-right');\r","\r","\t\tcont.one('.audioplayer-panel-bd').setHTML(lyricView.render().get('container'));\r","\t},\r","\r","\trender: function () {\r","\t\tvar albumList = this.get('albumList'),\r","\t\t\talbum = albumList.item(albumList.get('default_alubmIndex')),\r","\t\t\tcont = this.get('container'),\r","\t\t\tdata = {};\r","\r","\t\tdata.album = album.toJSON();\r","\r","\t\tcont.setHTML(this.template(data));\r","\t\tthis.audiosEngine = document.getElementById('audios-engine');\r","\t\tthis.showAlbumList();\r","\t\tthis.bindAudioEngine();\r","\t\tthis.initVolume();\r","\t\treturn this;\r","\t}\r","}, {\r","\tATTRS: {\r","\t\tisRepeatOne: {value: false},\t\t\t//是否为单曲重复\r","\t\tisStochastic: {value: false},\t\t\t//是否为随机播放\r","\t\taudioList: {value: new Y.AudioList()}\r","\t}\r","});\r","\r","var AlbumListView = Y.Base.create('albumListView', Y.View, [], {\r","\ttemplate1: Y.Handlebars.compile('<ul class=\"audioplayer-panel-albumlist\">{{#albumList}}' +\r","\t\t'<li class=\"audioplayer-panel-album\">' +  \r","\t\t\t'<a class=\"audioplayer-panel-album-avatar\" data-id=\"{{{id}}}\">' +\r","\t\t\t\t'<img src=\"{{{avatar}}}\" width=\"120\" height=\"120\"/>' +\r","\t\t\t'</a>' +\r","\t\t\t'<p class=\"audioplayer-panel-album-name\">{{{name}}}' +\r","\t\t\t\t'<span class=\"audioplayer-panel-album-num\">({{{audio_num}}})</span>' +\r","\t\t\t'</p>' +\r","\t\t'</li>' +\r","\t'{{/albumList}}</ul>'),\r","\r","\ttemplate2: Y.Handlebars.compile('<table class=\"audioplayer-panel-songlist\">{{#songList}}' +\r","\t\t'<tr class=\"audioplayer-panel-song{{#if selected}} audioplayer-panel-song-selected{{/if}}{{#if even}} audioplayer-panel-song-even{{/if}}\" data-index={{{index}}}><td>{{{num}}}</td><td>{{{name}}}</td><td>{{{duration}}}</td><td>{{{author}}}</td><td>{{#with belong_album}}{{{name}}}{{/with}}</td></tr>' +\r","\t'{{/songList}}</table>' +\r","\t'<p><button class=\"button-normal-s audioplayer-panel-songlist-back\">返回</button></p>'),\r","\r","\tevents: {\r","\t\t'.audioplayer-panel-album-avatar': {\r","\t\t\tclick: 'showAudios'\r","\t\t},\r","\t\t'.audioplayer-panel-song': {\r","\t\t\tmouseover: 'addSongHover',\r","\t\t\tmouseout: 'removeSongHover',\r","\t\t\tclick: 'changeAudio'\r","\t\t},\r","\t\t'.audioplayer-panel-songlist-back': {\r","\t\t\tclick: 'trunBackToAlbums'\r","\t\t}\r","\t},\r","\r","\tinitializer: function () {\r","\t\tvar audioList = this.get('audioList'),\r","\t\t\tself = this;\r","\t\t\r","\t\taudioList.after('active_audioIndexChange', function () {\r","\t\t\tif(self.get('activeTemplate') === 2) {\r","\t\t\t\tself.renderTemplate2();\r","\t\t\t}\r","\t\t});\r","\t},\r","\r","\taddSongHover: function (e) {\r","\t\te.currentTarget.addClass('audioplayer-panel-song-hover');\r","\t},\r","\r","\tremoveSongHover: function (e) {\r","\t\te.currentTarget.removeClass('audioplayer-panel-song-hover');\r","\t},\r","\r","\tchangeAudio: function (e) {\r","\t\tvar dataIndex = e.currentTarget.getAttribute('data-index'),\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\taudioList = this.get('audioList');\r","\r","\t\talbumList.set('active_album', albumList.getById(audioList.get('album_id')));\r","\t\tY.one('.audioplayer-control-boardcast-row1-play').addClass('audioplayer-control-boardcast-row1-pause');\r","\r","\t\tif(audioList.get('active_audioIndex') === dataIndex) {\r","\t\t\tdocument.getElementById('audios-engine').currentTime = 0;\r","\t\t\tthis.set('audioRestart', !this.get('audioRestart'));\r","\t\t} else {\r","\t\t\taudioList.set('active_audioIndex', dataIndex);\r","\t\t\tthis.renderTemplate2();\r","\t\t}\r","\t},\r","\r","\tshowAudios: function (e) {\r","\t\tvar albumId = +e.currentTarget.getAttribute('data-id'),\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\taudioList = this.get('audioList'),\r","\t\t\tself = this;\r","\r","\t\taudioList.setAttrs({album_id: albumId}).load(function (err, res) {\r","\t\t\tif(!err) {\r","\t\t\t\talbumList.getById(albumId).set('audio_collection', audioList.toJSON());\r","\t\t\t\tself.renderTemplate2();\r","\t\t\t}\r","\t\t});\r","\t},\r","\r","\ttrunBackToAlbums: function () {\r","\t\tthis.renderTemplate1();\r","\t},\r","\r","\trenderTemplate1: function () {\r","\t\tvar cont = this.get('container'),\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\tdata = {};\r","\r","\t\tdata.albumList = albumList.toJSON();\r","\r","\t\tcont.setHTML(this.template1(data));\r","\t\tthis.set('activeTemplate', 1);\r","\t},\r","\r","\trenderTemplate2: function () {\r","\t\tvar cont = this.get('container'),\r","\t\t\taudioList = this.get('audioList'),\r","\t\t\talbumList = this.get('albumList'),\r","\t\t\tactiveAudioIndex = audioList.get('active_audioIndex'),\r","\t\t\tactiveAlbum = albumList.getById(audioList.get('album_id')),\r","\t\t\tactiveAlbumIndex = albumList.indexOf(activeAlbum),\r","\t\t\tdata = {};\r","\r","\t\tdata.songList = Y.Array.map(audioList.toJSON(), function (item, index) {\r","\t\t\titem.index = activeAlbumIndex + '-' + index;\r","\t\t\titem.num = index + 1;\r","\t\t\titem.even = index % 2 === 0;\r","\t\t\titem.duration = formatTime(item.duration);\r","\t\t\tif(activeAudioIndex !== null) {\r","\t\t\t\tvar arr = activeAudioIndex.split('-');\r","\t\t\t\tif(+arr[0] === activeAlbumIndex && +arr[1] === index) {\r","\t\t\t\t\titem.selected = true;\r","\t\t\t\t}\r","\t\t\t}\r","\t\t\treturn item;\r","\t\t});\r","\r","\t\tcont.setHTML(this.template2(data));\r","\t\tthis.set('activeTemplate', 2);\r","\t},\r","\r","\trender: function () {\r","\t\tthis.renderTemplate1();\r","\t\treturn this;\r","\t}\r","}, {\r","\tATTRS: {\r","\t\tactiveTemplate: {value: null},\r","\t\taudioRestart: {value: false}\r","\t}\r","});\r","\r","var LyricView = Y.Base.create('lyricView', Y.View, [], {\r","\ttemplate: '<div class=\"audioplayer-panel-lyric\"></div>',\r","\r","\tinitializer: function () {\r","\t\tvar self = this;\r","\r","\t\tthis.after('lyricChange', function () {\r","\t\t\tself.render();\r","\t\t});\r","\t\tthis.audiosEngine = document.getElementById('audios-engine');\r","\t},\r","\r","\tinitScrollLyric: function () {\r","\t\tvar self = this,\r","\t\t\tpNode = this.get('container').one('.audioplayer-panel-lyric'),\r","\t\t\tnodes = pNode.all('p');\r","\r","\t\tif(this.timer) {\r","\t\t\tclearInterval(this.timer);\r","\t\t}\r","\r","\t\tthis.timer = setInterval(function () {\r","\t\t\tvar currentTime = self.audiosEngine.currentTime;\r","\r","\t\t\tnodes.removeClass('audioplayer-panel-lyric-item-selected');\r","\r","\t\t\tfor(var i = 0, len = nodes.size(); i < len; i++) {\r","\t\t\t\tif(currentTime < +nodes.item(i).getAttribute('data-time')) {\r","\t\t\t\t\tif(i === 0) {\r","\t\t\t\t\t\tnodes.item(i).addClass('audioplayer-panel-lyric-item-selected');\r","\t\t\t\t\t} else {\r","\t\t\t\t\t\tnodes.item(i - 1).addClass('audioplayer-panel-lyric-item-selected');\r","\t\t\t\t\t\tif(nodes.item(i - 1).get('offsetTop') > 240) {\r","\t\t\t\t\t\t\tpNode.set('scrollTop', nodes.item(i - 1).get('offsetTop') - 240);\r","\t\t\t\t\t\t}\r","\t\t\t\t\t\t\r","\t\t\t\t\t}\r","\t\t\t\t\tbreak;\r","\t\t\t\t}\r","\t\t\t}\r","\t\t}, 1000);\r","\t},\r","\r","\trender: function () {\r","\t\tvar cont = this.get('container'),\r","\t\t\tlyric = this.get('lyric'),\r","\t\t\thtml = '';\r","\r","\t\tif(lyric === null) {\r","\t\t\thtml = '<p class=\"audioplayer-panel-lyric-nonlyric\">请先播放歌曲！</p>';\r","\t\t} else {\r","\t\t\thtml = lyric.replace(/\\[(.*?)\\]([^\\[]*)/g, function(all, a, b) {\r","\t\t\t\tvar arr = a.split(':'),\r","\t\t\t\t\tseconds = (+arr[0]) * 60 + (+arr[1]);\r","\r","\t\t\t\treturn '<p class=\"audioplayer-panel-lyric-item\" data-time=\"' + seconds + '\">' + b + '</p>';\r","\t\t\t});\r","\t\t}\r","\r","\t\tcont.setHTML(this.template);\r","\t\tcont.one('.audioplayer-panel-lyric').setHTML(html);\r","\t\tthis.initScrollLyric();\r","\t\treturn this;\r","\t}\r","}, {\r","\tATTRS: {\r","\t\tlyric: {value: null}\r","\t}\r","});","","}, '@VERSION@', {\"requires\": [\"view\", \"model-list\", \"handlebars\", \"np-models\", \"node-style\"]});","","}());"]};
}
var __cov_zkdcKlTSS6ffhbA5Pr8CLQ = __coverage__['build/np-audioplayer/np-audioplayer.js'];
__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['1']++;YUI.add('np-audioplayer',function(Y,NAME){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['1']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['2']++;var L=Y.Lang;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['3']++;Y.AlbumList=Y.Base.create('albumList',Y.ModelList,[Y.NPModel.Sync],{apis:{read:'/api/albums'},model:Y.Album},{ATTRS:{active_album:{value:null},default_alubmIndex:{value:0}}});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['4']++;Y.AudioList=Y.Base.create('audioList',Y.ModelList,[Y.NPModel.Sync],{apis:{read:'/api/albums/{id}'},buildURL:function(action){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['2']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['5']++;return L.sub(this.apis[action],{id:this.get('album_id')});},model:Y.Audio},{ATTRS:{album_id:{value:null},playing_audios:{value:[]},playing_audioIndex:{value:0},active_audioIndex:{value:null}}});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['6']++;function formatTime(value){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['3']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['7']++;var x,y,html='';__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['8']++;if(value>60){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['1'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['9']++;x=Math.floor(value/60);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['10']++;if(x>=10){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['2'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['11']++;html+=x;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['2'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['12']++;html+='0'+x;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['13']++;html+=':';__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['14']++;y=value%60;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['15']++;if(y>=10){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['3'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['16']++;html+=y;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['3'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['17']++;html+='0'+y;}}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['1'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['18']++;if(value>=10){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['4'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['19']++;html+='00:'+value;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['4'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['20']++;html+='00:0'+value;}}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['21']++;return html;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['22']++;Y.AudioPlayer=Y.Base.create('audioPlayer',Y.View,[],{template:Y.Handlebars.compile('<div class="audioplayer">'+'<div class="audioplayer-panel">'+'<div class="audioplayer-panel-hd">'+'<a class="audioplayer-panel-hd-album">\u4e13\u8f91</a>'+'<span class="audioplayer-panel-hd-switch">'+'<span class="audioplayer-panel-hd-switch-roller"></span>'+'</span>'+'<a class="audioplayer-panel-hd-lyric">\u6b4c\u8bcd</a>'+'</div>'+'<div class="audioplayer-panel-bd"></div>'+'</div>'+'<div class="audioplayer-control">'+'<div class="audioplayer-control-main">'+'<div class="audioplayer-control-infos">{{#album}}'+'<a class="audioplayer-control-infos-avatar"><img src="{{{avatar}}}" width="80px" height="80px"/></a>'+'<h3>xxx</h3>'+'<p>yyy</p>'+'<p>{{{name}}}</p>'+'{{/album}}</div>'+'<div class="audioplayer-control-boardcast">'+'<div class="audioplayer-control-boardcast-content">'+'<div class="audioplayer-control-boardcast-row1">'+'<a class="audioplayer-control-boardcast-row1-prev"></a>'+'<a class="audioplayer-control-boardcast-row1-play"></a>'+'<a class="audioplayer-control-boardcast-row1-next"></a>'+'<div class="audioplayer-control-boardcast-row1-volume">'+'<div class="audioplayer-control-boardcast-row1-volume-inner" style="width:80px;"></div>'+'<span class="audioplayer-control-boardcast-row1-volume-roller" style="left:70px;"></span>'+'</div>'+'</div>'+'<div class="audioplayer-control-boardcast-row2">'+'<span class="audioplayer-control-boardcast-row2-time1">00:00</span>'+'<span class="audioplayer-control-boardcast-row2-time2">05:21</span>'+'<div class="audioplayer-control-boardcast-row2-process">'+'<div class="audioplayer-control-boardcast-row2-process-value" style=""></div>'+'</div>'+'</div>'+'<div class="audioplayer-control-boardcast-row3">'+'<a class="audioplayer-control-boardcast-row3-repeat">\u5355\u66f2\u91cd\u590d</a>'+'<a class="audioplayer-control-boardcast-row3-stochastic">\u968f\u673a\u64ad\u653e</a>'+'</div>'+'</div>'+'</div>'+'</div>'+'<a class="audioplayer-control-side">'+'<span class="audioplayer-control-side-arrow"></span>'+'</a>'+'</div>'+'</div>'+'<audio id="audios-engine"><source /></audio>'),template_info:Y.Handlebars.compile('{{#album}}<a class="audioplayer-control-infos-avatar"><img src="{{{avatar}}}" width="80px" height="80px"/></a>{{/album}}'+'{{#audio}}<h3>{{{name}}}</h3>'+'<p>{{{author}}}</p>{{/audio}}'+'{{#album}}<p>{{{name}}}</p>{{/album}}'),events:{'.audioplayer-control-side':{click:'toggleSideExpand'},'.audioplayer-control-infos-avatar':{click:'togglePanelExpand'},'.audioplayer-panel-hd-album':{click:'showAlbumList'},'.audioplayer-panel-hd-lyric':{click:'showLyric'},'.audioplayer-control-boardcast-row3-repeat':{click:'handleRepeat'},'.audioplayer-control-boardcast-row3-stochastic':{click:'handleStochastic'},'.audioplayer-control-boardcast-row1-play':{click:'playAudioEngine'},'.audioplayer-control-boardcast-row1-prev':{click:'playPrevAudio'},'.audioplayer-control-boardcast-row1-next':{click:'playNextAudio'},'.audioplayer-control-boardcast-row1-volume-roller':{mousedown:'handleVolumeMouseDown'}},initializer:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['4']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['23']++;var audioList=this.get('audioList'),self=this;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['24']++;window.onmouseup=function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['5']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['25']++;window.onmousemove=null;};__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['26']++;this._volumeObj={offsetMinLeft:-10,offsetMaxLeft:90};},handleVolumeMouseDown:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['6']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['27']++;var self=this,rollerNode=this.get('container').one('.audioplayer-control-boardcast-row1-volume-roller'),processBar=this.get('container').one('.audioplayer-control-boardcast-row1-volume-inner');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['28']++;Y.mix(this._volumeObj,{pageX:e.pageX,left:parseInt(rollerNode.getStyle('left')),rollerNode:rollerNode,processBar:processBar});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['29']++;window.onmousemove=function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['7']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['30']++;self.handleVolume(e);};},handleVolume:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['8']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['31']++;var volumeObj=this._volumeObj,x=e.pageX-volumeObj.pageX,offsetLeft=volumeObj.left+x,offsetWidth=offsetLeft-volumeObj.offsetMinLeft;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['32']++;if((__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['6'][0]++,offsetLeft<volumeObj.offsetMinLeft)||(__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['6'][1]++,offsetLeft>volumeObj.offsetMaxLeft)){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['5'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['33']++;return false;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['5'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['34']++;volumeObj.rollerNode.setStyle('left',offsetLeft);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['35']++;volumeObj.processBar.setStyle('width',offsetWidth);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['36']++;this.audiosEngine.volume=offsetWidth/(volumeObj.offsetMaxLeft-volumeObj.offsetMinLeft);},initVolume:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['9']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['37']++;this.audiosEngine.volume=0.8;},toggleSideExpand:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['10']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['38']++;var cont=this.get('container'),audioplayerNode=cont.one('.audioplayer'),audioplayerPanelNode=cont.one('.audioplayer-panel');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['39']++;if(audioplayerNode.hasClass('audioplayer-hide')){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['7'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['40']++;audioplayerPanelNode.removeClass('audioplayer-panel-hide');}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['7'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['41']++;audioplayerNode.toggleClass('audioplayer-hide');},togglePanelExpand:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['11']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['42']++;var node=this.get('container').one('.audioplayer-panel');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['43']++;node.toggleClass('audioplayer-panel-hide');},playAudioEngine:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['12']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['44']++;var audiosEngine=this.audiosEngine,audioList=this.get('audioList'),albumList=this.get('albumList'),node=e.currentTarget;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['45']++;if(node.hasClass('audioplayer-control-boardcast-row1-pause')){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['8'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['46']++;audiosEngine.pause();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['47']++;this.toPlay('pause');}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['8'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['48']++;if(audiosEngine.src){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['9'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['49']++;audiosEngine.play();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['50']++;this.toPlay('play');}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['9'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['51']++;if(audioList.get('album_id')===null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['10'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['52']++;var defaultAlubmIndex=albumList.get('default_alubmIndex'),albumId=albumList.item(defaultAlubmIndex).get('id');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['53']++;audioList.set('album_id',albumId).load(function(err){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['13']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['54']++;if(!err){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['11'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['55']++;albumList.getById(albumId).set('audio_collection',audioList.toJSON());__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['56']++;albumList.set('active_album',albumList.getById(albumId));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['57']++;audioList.set('active_audioIndex',defaultAlubmIndex+'-0',{smooth:false});}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['11'][1]++;}});}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['10'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['58']++;var activeAlbum=albumList.getById(audioList.get('album_id'));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['59']++;albumList.set('active_album',activeAlbum);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['60']++;audioList.set('active_audioIndex',albumList.indexOf(activeAlbum)+'-0',{smooth:false});}}}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['61']++;node.toggleClass('audioplayer-control-boardcast-row1-pause');},playPrevAudio:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['14']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['62']++;if(this.get('audioList').get('active_audioIndex')===null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['12'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['63']++;return false;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['12'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['64']++;this.get('container').one('.audioplayer-control-boardcast-row1-play').addClass('audioplayer-control-boardcast-row1-pause');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['65']++;var audioList=this.get('audioList'),albumList=this.get('albumList'),playingAudioIndex=audioList.get('playing_audioIndex'),playingAudios=audioList.get('playing_audios'),audioCollection=albumList.get('active_album').get('audio_collection'),activeAudioIndex;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['66']++;audioList.set('playing_audioIndex',(playingAudioIndex-1+playingAudios.length)%playingAudios.length);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['67']++;activeAudioId=playingAudios[audioList.get('playing_audioIndex')].id;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['68']++;for(var i=0,len=audioCollection.length;i<len;i++){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['69']++;if(audioCollection[i].id===activeAudioId){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['13'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['70']++;activeAudioIndex=i;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['71']++;break;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['13'][1]++;}}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['72']++;activeAudio=playingAudios[audioList.get('playing_audioIndex')];__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['73']++;audioList.set('active_audioIndex',audioList.get('active_audioIndex').split('-')[0]+'-'+activeAudioIndex,{smooth:true});},playNextAudio:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['15']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['74']++;if(this.get('audioList').get('active_audioIndex')===null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['14'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['75']++;return false;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['14'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['76']++;this.get('container').one('.audioplayer-control-boardcast-row1-play').addClass('audioplayer-control-boardcast-row1-pause');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['77']++;var audioList=this.get('audioList'),albumList=this.get('albumList'),playingAudioIndex=audioList.get('playing_audioIndex'),playingAudios=audioList.get('playing_audios'),audioCollection=albumList.get('active_album').get('audio_collection'),activeAudioIndex;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['78']++;audioList.set('playing_audioIndex',(playingAudioIndex+1)%playingAudios.length);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['79']++;activeAudioId=playingAudios[audioList.get('playing_audioIndex')].id;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['80']++;for(var i=0,len=audioCollection.length;i<len;i++){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['81']++;if(audioCollection[i].id===activeAudioId){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['15'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['82']++;activeAudioIndex=i;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['83']++;break;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['15'][1]++;}}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['84']++;audioList.set('active_audioIndex',audioList.get('active_audioIndex').split('-')[0]+'-'+activeAudioIndex,{smooth:true});},toPlay:function(action){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['16']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['85']++;var cont=this.get('container'),barWidth=230,node=cont.one('.audioplayer-control-boardcast-row2-process-value'),audioList=this.get('audioList'),activeAudioObj=audioList.get('playing_audios')[audioList.get('playing_audioIndex')],duration=activeAudioObj.duration,self=this;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['86']++;if(action==='play'){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['16'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['87']++;if(this.timer){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['17'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['88']++;clearInterval(this.timer);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['17'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['89']++;this.timer=setInterval(function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['17']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['90']++;var currentTime=self.audiosEngine.currentTime,p=currentTime/duration;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['91']++;node.setAttribute('style','width: '+p*barWidth+'px;');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['92']++;cont.one('.audioplayer-control-boardcast-row2-time1').setHTML(formatTime(Math.round(currentTime)));},1000);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['16'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['93']++;if(action==='pause'){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['18'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['94']++;clearInterval(this.timer);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['18'][1]++;}}},resetProcess:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['18']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['95']++;var cont=this.get('container'),activeAudioObj=this.getActiveAudioObj();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['96']++;cont.one('.audioplayer-control-boardcast-row2-time1').setHTML('00:00');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['97']++;cont.one('.audioplayer-control-boardcast-row2-time2').setHTML(formatTime(activeAudioObj.duration));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['98']++;cont.one('.audioplayer-control-boardcast-row2-process-value').setAttribute('style','width: 0px;');},getActiveAudioObj:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['19']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['99']++;var activeAlbum=this.get('albumList').get('active_album');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['100']++;if(activeAlbum===null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['19'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['101']++;return null;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['19'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['102']++;var audioCollection=activeAlbum.get('audio_collection'),activeAudioIndex=+this.get('audioList').get('active_audioIndex').split('-')[1];__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['103']++;return audioCollection[activeAudioIndex];},createCurrentAudioList:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['20']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['104']++;var audioList=this.get('audioList'),activeAlbum=this.get('albumList').get('active_album'),audioCollection=activeAlbum.get('audio_collection'),activeAudioIndex=+audioList.get('active_audioIndex').split('-')[1],size=audioCollection.length,c=[];__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['105']++;audioList.set('playing_audioIndex',0);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['106']++;Y.Array.each(audioCollection,function(item,index){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['21']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['107']++;if(index<activeAudioIndex){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['20'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['108']++;c[size-activeAudioIndex+index]=item;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['20'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['109']++;c[index-activeAudioIndex]=item;}});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['110']++;if(this.get('isStochastic')){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['21'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['111']++;var firstAudio=c.shift();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['112']++;c=this.resortArray(c);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['113']++;c.unshift(firstAudio);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['21'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['114']++;audioList.set('playing_audios',c);},loadAudio:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['22']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['115']++;var audioList=this.get('audioList'),playingAudioIndex=audioList.get('playing_audioIndex'),playingAudios=audioList.get('playing_audios');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['116']++;this.audiosEngine.src=playingAudios[playingAudioIndex].src;},bindAudioEngine:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['23']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['117']++;var audiosEngine=this.audiosEngine,albumList=this.get('albumList'),audioList=this.get('audioList'),self=this;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['118']++;audiosEngine.addEventListener('ended',function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['24']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['119']++;if(!self.get('isRepeatOne')){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['22'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['120']++;var playingAudioIndex=audioList.get('playing_audioIndex'),playingAudios=audioList.get('playing_audios'),audioCollection=albumList.get('active_album').get('audio_collection'),activeAudioIndex;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['121']++;audioList.set('playing_audioIndex',(playingAudioIndex+1)%playingAudios.length);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['122']++;activeAudioId=playingAudios[audioList.get('playing_audioIndex')].id;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['123']++;for(var i=0,len=audioCollection.length;i<len;i++){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['124']++;if(audioCollection[i].id===activeAudioId){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['23'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['125']++;activeAudioIndex=i;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['126']++;break;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['23'][1]++;}}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['127']++;audioList.set('active_audioIndex',audioList.get('active_audioIndex').split('-')[0]+'-'+activeAudioIndex,{smooth:true});}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['22'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['128']++;self.audiosEngine.play();}},false);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['129']++;audioList.after('active_audioIndexChange',function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['25']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['130']++;var activeAudioIndex=+e.newVal.split('-')[1],infosNode=self.get('container').one('.audioplayer-control-infos'),album=albumList.get('active_album'),o={};__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['131']++;o.audio=album.get('audio_collection')[activeAudioIndex];__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['132']++;o.album=album.toJSON();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['133']++;self.resetProcess();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['134']++;infosNode.setHTML(self.template_info(o));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['135']++;if(!e.smooth){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['24'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['136']++;self.createCurrentAudioList();}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['24'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['137']++;self.loadAudio();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['138']++;self.audiosEngine.play();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['139']++;self.toPlay('play');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['140']++;if(self.lyricView){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['25'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['141']++;self.lyricView.set('lyric',o.audio.lyric);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['25'][1]++;}});},resortArray:function(arr){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['26']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['142']++;if(arr.length<=1){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['26'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['143']++;return arr;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['26'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['144']++;var newArr=[];__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['145']++;for(var i=0,len=arr.length;i<len;i++){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['146']++;var randNum=Math.floor(Math.random()*arr.length),randEle=arr.splice(randNum,1)[0];__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['147']++;newArr.push(randEle);}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['148']++;return newArr;},handleRepeat:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['27']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['149']++;var node=e.currentTarget;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['150']++;if(node.hasClass('audioplayer-control-boardcast-row3-repeat-active')){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['27'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['151']++;this.set('isRepeatOne',false);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['152']++;if(this.get('audioList').get('active_audioIndex')!==null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['28'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['153']++;this.createCurrentAudioList();}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['28'][1]++;}}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['27'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['154']++;this.set('isRepeatOne',true);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['155']++;this.set('isStochastic',false);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['156']++;this.get('container').one('.audioplayer-control-boardcast-row3-stochastic').removeClass('audioplayer-control-boardcast-row3-stochastic-active');}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['157']++;node.toggleClass('audioplayer-control-boardcast-row3-repeat-active');},handleStochastic:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['28']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['158']++;var node=e.currentTarget;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['159']++;if(node.hasClass('audioplayer-control-boardcast-row3-stochastic-active')){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['29'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['160']++;this.set('isStochastic',false);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['29'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['161']++;this.set('isStochastic',true);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['162']++;this.set('isRepeatOne',false);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['163']++;this.get('container').one('.audioplayer-control-boardcast-row3-repeat').removeClass('audioplayer-control-boardcast-row3-repeat-active');}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['164']++;node.toggleClass('audioplayer-control-boardcast-row3-stochastic-active');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['165']++;if(this.get('audioList').get('active_audioIndex')!==null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['30'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['166']++;this.createCurrentAudioList();}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['30'][1]++;}},showAlbumList:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['29']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['167']++;var cont=this.get('container'),self=this,albumListView;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['168']++;if(this.albumListView){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['31'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['169']++;albumListView=this.albumListView;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['31'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['170']++;albumListView=this.albumListView=new AlbumListView({albumList:this.get('albumList'),audioList:this.get('audioList')});}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['171']++;cont.one('.audioplayer-panel-hd-switch').removeClass('audioplayer-panel-hd-switch-right');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['172']++;cont.one('.audioplayer-panel-bd').setHTML(albumListView.render().get('container'));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['173']++;albumListView.on('audioRestartChange',function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['30']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['174']++;self.resetProcess();});},showLyric:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['31']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['175']++;var cont=this.get('container'),activeAudioObj=this.getActiveAudioObj(),lyric=activeAudioObj?(__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['32'][0]++,activeAudioObj.lyric):(__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['32'][1]++,null),lyricView;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['176']++;if(this.lyricView){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['33'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['177']++;lyricView=this.lyricView;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['33'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['178']++;lyricView=this.lyricView=new LyricView({lyric:lyric});}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['179']++;cont.one('.audioplayer-panel-hd-switch').addClass('audioplayer-panel-hd-switch-right');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['180']++;cont.one('.audioplayer-panel-bd').setHTML(lyricView.render().get('container'));},render:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['32']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['181']++;var albumList=this.get('albumList'),album=albumList.item(albumList.get('default_alubmIndex')),cont=this.get('container'),data={};__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['182']++;data.album=album.toJSON();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['183']++;cont.setHTML(this.template(data));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['184']++;this.audiosEngine=document.getElementById('audios-engine');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['185']++;this.showAlbumList();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['186']++;this.bindAudioEngine();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['187']++;this.initVolume();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['188']++;return this;}},{ATTRS:{isRepeatOne:{value:false},isStochastic:{value:false},audioList:{value:new Y.AudioList()}}});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['189']++;var AlbumListView=Y.Base.create('albumListView',Y.View,[],{template1:Y.Handlebars.compile('<ul class="audioplayer-panel-albumlist">{{#albumList}}'+'<li class="audioplayer-panel-album">'+'<a class="audioplayer-panel-album-avatar" data-id="{{{id}}}">'+'<img src="{{{avatar}}}" width="120" height="120"/>'+'</a>'+'<p class="audioplayer-panel-album-name">{{{name}}}'+'<span class="audioplayer-panel-album-num">({{{audio_num}}})</span>'+'</p>'+'</li>'+'{{/albumList}}</ul>'),template2:Y.Handlebars.compile('<table class="audioplayer-panel-songlist">{{#songList}}'+'<tr class="audioplayer-panel-song{{#if selected}} audioplayer-panel-song-selected{{/if}}{{#if even}} audioplayer-panel-song-even{{/if}}" data-index={{{index}}}><td>{{{num}}}</td><td>{{{name}}}</td><td>{{{duration}}}</td><td>{{{author}}}</td><td>{{#with belong_album}}{{{name}}}{{/with}}</td></tr>'+'{{/songList}}</table>'+'<p><button class="button-normal-s audioplayer-panel-songlist-back">\u8fd4\u56de</button></p>'),events:{'.audioplayer-panel-album-avatar':{click:'showAudios'},'.audioplayer-panel-song':{mouseover:'addSongHover',mouseout:'removeSongHover',click:'changeAudio'},'.audioplayer-panel-songlist-back':{click:'trunBackToAlbums'}},initializer:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['33']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['190']++;var audioList=this.get('audioList'),self=this;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['191']++;audioList.after('active_audioIndexChange',function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['34']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['192']++;if(self.get('activeTemplate')===2){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['34'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['193']++;self.renderTemplate2();}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['34'][1]++;}});},addSongHover:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['35']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['194']++;e.currentTarget.addClass('audioplayer-panel-song-hover');},removeSongHover:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['36']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['195']++;e.currentTarget.removeClass('audioplayer-panel-song-hover');},changeAudio:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['37']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['196']++;var dataIndex=e.currentTarget.getAttribute('data-index'),albumList=this.get('albumList'),audioList=this.get('audioList');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['197']++;albumList.set('active_album',albumList.getById(audioList.get('album_id')));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['198']++;Y.one('.audioplayer-control-boardcast-row1-play').addClass('audioplayer-control-boardcast-row1-pause');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['199']++;if(audioList.get('active_audioIndex')===dataIndex){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['35'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['200']++;document.getElementById('audios-engine').currentTime=0;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['201']++;this.set('audioRestart',!this.get('audioRestart'));}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['35'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['202']++;audioList.set('active_audioIndex',dataIndex);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['203']++;this.renderTemplate2();}},showAudios:function(e){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['38']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['204']++;var albumId=+e.currentTarget.getAttribute('data-id'),albumList=this.get('albumList'),audioList=this.get('audioList'),self=this;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['205']++;audioList.setAttrs({album_id:albumId}).load(function(err,res){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['39']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['206']++;if(!err){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['36'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['207']++;albumList.getById(albumId).set('audio_collection',audioList.toJSON());__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['208']++;self.renderTemplate2();}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['36'][1]++;}});},trunBackToAlbums:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['40']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['209']++;this.renderTemplate1();},renderTemplate1:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['41']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['210']++;var cont=this.get('container'),albumList=this.get('albumList'),data={};__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['211']++;data.albumList=albumList.toJSON();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['212']++;cont.setHTML(this.template1(data));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['213']++;this.set('activeTemplate',1);},renderTemplate2:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['42']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['214']++;var cont=this.get('container'),audioList=this.get('audioList'),albumList=this.get('albumList'),activeAudioIndex=audioList.get('active_audioIndex'),activeAlbum=albumList.getById(audioList.get('album_id')),activeAlbumIndex=albumList.indexOf(activeAlbum),data={};__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['215']++;data.songList=Y.Array.map(audioList.toJSON(),function(item,index){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['43']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['216']++;item.index=activeAlbumIndex+'-'+index;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['217']++;item.num=index+1;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['218']++;item.even=index%2===0;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['219']++;item.duration=formatTime(item.duration);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['220']++;if(activeAudioIndex!==null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['37'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['221']++;var arr=activeAudioIndex.split('-');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['222']++;if((__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['39'][0]++,+arr[0]===activeAlbumIndex)&&(__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['39'][1]++,+arr[1]===index)){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['38'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['223']++;item.selected=true;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['38'][1]++;}}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['37'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['224']++;return item;});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['225']++;cont.setHTML(this.template2(data));__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['226']++;this.set('activeTemplate',2);},render:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['44']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['227']++;this.renderTemplate1();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['228']++;return this;}},{ATTRS:{activeTemplate:{value:null},audioRestart:{value:false}}});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['229']++;var LyricView=Y.Base.create('lyricView',Y.View,[],{template:'<div class="audioplayer-panel-lyric"></div>',initializer:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['45']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['230']++;var self=this;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['231']++;this.after('lyricChange',function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['46']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['232']++;self.render();});__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['233']++;this.audiosEngine=document.getElementById('audios-engine');},initScrollLyric:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['47']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['234']++;var self=this,pNode=this.get('container').one('.audioplayer-panel-lyric'),nodes=pNode.all('p');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['235']++;if(this.timer){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['40'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['236']++;clearInterval(this.timer);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['40'][1]++;}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['237']++;this.timer=setInterval(function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['48']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['238']++;var currentTime=self.audiosEngine.currentTime;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['239']++;nodes.removeClass('audioplayer-panel-lyric-item-selected');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['240']++;for(var i=0,len=nodes.size();i<len;i++){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['241']++;if(currentTime<+nodes.item(i).getAttribute('data-time')){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['41'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['242']++;if(i===0){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['42'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['243']++;nodes.item(i).addClass('audioplayer-panel-lyric-item-selected');}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['42'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['244']++;nodes.item(i-1).addClass('audioplayer-panel-lyric-item-selected');__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['245']++;if(nodes.item(i-1).get('offsetTop')>240){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['43'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['246']++;pNode.set('scrollTop',nodes.item(i-1).get('offsetTop')-240);}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['43'][1]++;}}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['247']++;break;}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['41'][1]++;}}},1000);},render:function(){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['49']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['248']++;var cont=this.get('container'),lyric=this.get('lyric'),html='';__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['249']++;if(lyric===null){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['44'][0]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['250']++;html='<p class="audioplayer-panel-lyric-nonlyric">\u8bf7\u5148\u64ad\u653e\u6b4c\u66f2\uff01</p>';}else{__cov_zkdcKlTSS6ffhbA5Pr8CLQ.b['44'][1]++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['251']++;html=lyric.replace(/\[(.*?)\]([^\[]*)/g,function(all,a,b){__cov_zkdcKlTSS6ffhbA5Pr8CLQ.f['50']++;__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['252']++;var arr=a.split(':'),seconds=+arr[0]*60+ +arr[1];__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['253']++;return'<p class="audioplayer-panel-lyric-item" data-time="'+seconds+'">'+b+'</p>';});}__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['254']++;cont.setHTML(this.template);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['255']++;cont.one('.audioplayer-panel-lyric').setHTML(html);__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['256']++;this.initScrollLyric();__cov_zkdcKlTSS6ffhbA5Pr8CLQ.s['257']++;return this;}},{ATTRS:{lyric:{value:null}}});},'@VERSION@',{'requires':['view','model-list','handlebars','np-models','node-style']});
